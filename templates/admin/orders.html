<!doctype html>
<html lang="en" data-theme="{{ 'dark' if request.cookies.get('theme') == 'dark' else 'light' }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Orders - Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <style>
      :root {
        --primary-color: #1e5a8e;
        --accent-color: #FF6B35;
        --secondary-color: #f0f8ff;
        --card-bg: #fff;
        --text-color: #2c3e50;
        --border-color: #e9ecef;
        --success: #28a745;
        --pending: #ffc107;
        --cancelled: #dc3545;
      }
      [data-theme="dark"] {
        --primary-color: #4a90e2;
        --accent-color: #FF6B35;
        --secondary-color: #181c24;
        --card-bg: #1b2838;
        --text-color: #e0e0e0;
        --border-color: #2d3748;
        --success: #4bb543;
        --pending: #ffe066;
        --cancelled: #ff6b6b;
      }
      body {
        background: var(--secondary-color);
        color: var(--text-color);
      }
      .table {
        background: var(--card-bg);
        color: var(--text-color);
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(30,90,142,0.08);
        overflow: hidden;
      }
      th, td {
        color: var(--text-color) !important;
        vertical-align: middle;
      }
      .table-striped > tbody > tr:nth-of-type(odd) {
        background: var(--secondary-color);
      }
      .table-hover tbody tr:hover {
        background: var(--accent-color);
        color: #fff;
        transition: background 0.2s;
      }
      .badge {
        color: #fff;
        font-size: 0.95em;
        padding: 0.4em 0.7em;
        border-radius: 8px;
      }
      .badge-success { background: var(--success); }
      .badge-pending { background: var(--pending); color: #333; }
      .badge-cancelled { background: var(--cancelled); }
      .btn-primary {
        color: #fff;
        background-color: var(--primary-color);
        border-color: var(--primary-color);
        font-weight: 500;
        box-shadow: 0 1px 4px rgba(30,90,142,0.10);
        transition: transform 0.1s;
      }
      .btn-primary:hover {
        background-color: var(--accent-color);
        border-color: var(--accent-color);
        transform: scale(1.05);
      }
      .admin-table-actions .btn {
        display: flex;
        align-items: center;
        gap: 0.3em;
      }
      @media (max-width: 576px) {
        .admin-table-actions .btn {
          width: 100%;
        }
        .table {
          font-size: 0.95em;
        }
      }
    </style>
</head>
<body>
  {% include 'navbar.html' %}
  <div class="container my-4">
    <div class="d-flex justify-content-between align-items-center flex-column flex-md-row gap-2 align-items-start align-items-md-center">
      <h1>Orders</h1>
      <a href="{{ url_for('admin_index') }}" class="btn btn-secondary d-flex align-items-center gap-2" style="font-weight:500;">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M15 8a.5.5 0 0 1-.5.5H3.707l3.147 3.146a.5.5 0 0 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 0 1 .708.708L3.707 7.5H14.5A.5.5 0 0 1 15 8z"/></svg>
        Back to Dashboard
      </a>
    </div>

    <div class="table-responsive mt-3">
    <table class="table table-striped table-hover mb-0">
      <thead>
        <tr>
          <th>ID</th>
          <th>Buyer</th>
          <th>Total</th>
          <th>Created</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for o in orders %}
          <tr>
            <td>{{ o['id'] }}</td>
            <td>{{ o['buyer_name'] or 'User ' ~ o['buyer_id'] }}</td>
            <td>${{ '%.2f'|format(o['total']) }}</td>
            <td>{{ o['created_at'].strftime('%Y-%m-%d %H:%M:%S') if o['created_at'] else '' }}</td>
            <td>
              {% set status = o['status'] if o['status'] is defined else 'Completed' %}
              {% if status == 'Completed' %}
                <span class="badge badge-success">Completed</span>
              {% elif status == 'Pending' %}
                <span class="badge badge-pending">Pending</span>
              {% elif status == 'Cancelled' %}
                <span class="badge badge-cancelled">Cancelled</span>
              {% else %}
                <span class="badge badge-secondary">{{ status }}</span>
              {% endif %}
            </td>
            <td>
              <div class="admin-table-actions d-flex flex-wrap gap-1">
                <a href="{{ url_for('admin_order_detail', order_id=o['id']) }}" class="btn btn-sm btn-primary">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16"><path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM8 13.5c-4.478 0-7.364-4.155-7.938-5.016a.5.5 0 0 1 0-.968C.636 7.155 3.522 2.5 8 2.5c4.478 0 7.364 4.155 7.938 5.016a.5.5 0 0 1 0 .968C15.364 11.345 12.478 13.5 8 13.5z"/><path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM8 10a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/></svg>
                  View
                </a>
              </div>
            </td>
          </tr>
        {% endfor %}
        {% if not orders or orders|length == 0 %}
          <!-- Example Orders -->
          <tr>
            <td>1001</td>
            <td>Jane Doe</td>
            <td>$129.99</td>
            <td>2025-11-20 14:32</td>
            <td><span class="badge badge-success">Completed</span></td>
            <td><div class="admin-table-actions d-flex flex-wrap gap-1"><a href="#" class="btn btn-sm btn-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16"><path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM8 13.5c-4.478 0-7.364-4.155-7.938-5.016a.5.5 0 0 1 0-.968C.636 7.155 3.522 2.5 8 2.5c4.478 0 7.364 4.155 7.938 5.016a.5.5 0 0 1 0 .968C15.364 11.345 12.478 13.5 8 13.5z"/><path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM8 10a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/></svg> View</a></div></td>
          </tr>
          <tr>
            <td>1002</td>
            <td>John Smith</td>
            <td>$59.50</td>
            <td>2025-11-21 09:15</td>
            <td><span class="badge badge-pending">Pending</span></td>
            <td><div class="admin-table-actions d-flex flex-wrap gap-1"><a href="#" class="btn btn-sm btn-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16"><path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM8 13.5c-4.478 0-7.364-4.155-7.938-5.016a.5.5 0 0 1 0-.968C.636 7.155 3.522 2.5 8 2.5c4.478 0 7.364 4.155 7.938 5.016a.5.5 0 0 1 0 .968C15.364 11.345 12.478 13.5 8 13.5z"/><path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM8 10a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/></svg> View</a></div></td>
          </tr>
          <tr>
            <td>1003</td>
            <td>Emily Clark</td>
            <td>$249.00</td>
            <td>2025-11-22 11:47</td>
            <td><span class="badge badge-cancelled">Cancelled</span></td>
            <td><div class="admin-table-actions d-flex flex-wrap gap-1"><a href="#" class="btn btn-sm btn-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16"><path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM8 13.5c-4.478 0-7.364-4.155-7.938-5.016a.5.5 0 0 1 0-.968C.636 7.155 3.522 2.5 8 2.5c4.478 0 7.364 4.155 7.938 5.016a.5.5 0 0 1 0 .968C15.364 11.345 12.478 13.5 8 13.5z"/><path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM8 10a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"/></svg> View</a></div></td>
          </tr>
        {% endif %}
      </tbody>
    </table>
    </div>
  </div>
  {% include 'footer.html' %}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>